<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.20" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title> &middot; My New Hugo Site</title>

  
  <link rel="stylesheet" href="http://kedadiannao220.github.io/css/print.css" media="print">
  <link rel="stylesheet" href="http://kedadiannao220.github.io/css/poole.css">
  <link rel="stylesheet" href="http://kedadiannao220.github.io/css/syntax.css">
  <link rel="stylesheet" href="http://kedadiannao220.github.io/css/hyde.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="My New Hugo Site" />
</head>

  <body class=" ">
  <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="http://kedadiannao220.github.io/"><h1>My New Hugo Site</h1></a>
      <p class="lead">
      An elegant open source and mobile first theme for <a href="http://hugo.spf13.com">hugo</a> made by <a href="http://twitter.com/mdo">@mdo</a>. Originally made for Jekyll.
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="http://kedadiannao220.github.io/">Home</a> </li>
      
    </ul>

    <p>&copy; 2017. All rights reserved. </p>
  </div>
</div>

    <div class="content container">
    <div class="post">
  <h1></h1>
  <span class="post-date">Mon, Jan 1, 0001</span>
  

<h2 id="前言">前言</h2>

<ul>
<li><a href="http://www.mybatis.org/mybatis-3/zh/index.html">MyBatis</a>
之前叫iBatis，是Apache的一个开源项目，后来迁移到了Google
Code当中，改名为MyBatis</li>
<li>官网介绍如下：MyBatis 是一款优秀的持久层框架，它支持定制化
SQL、存储过程以及高级映射。MyBatis 避免了几乎所有的 JDBC
代码和手动设置参数以及获取结果集。MyBatis 可以使用简单的 XML
或注解来配置和映射原生信息，将接口和 Java 的 POJOs(Plain Old Java
Objects,普通的 Java对象)映射成数据库中的记录。</li>
</ul>

<h2 id="与spring-boot整合">与Spring Boot整合</h2>

<h3 id="基本整合">基本整合</h3>

<p>因为当前最流行的是Spring boot框架，所以在将Spring boot与MyBatis整合一下</p>

<pre><code class="language-shell">&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;1.3.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<pre><code class="language-java">package com.idcos.automate.dal.mybatis;

import com.idcos.automate.dal.auto.dataobject.xl.BibleTextDO;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;
import org.apache.ibatis.annotations.Select;

@Mapper
public interface BibleTextMapper {

    @Select(&quot;SELECT * FROM BIBLE_TEXT WHERE ID = #{id}&quot;)
    BibleTextDO findOne(@Param(&quot;id&quot;) String id);
}
</code></pre>

<pre><code class="language-java">package com.idcos.gen;

import com.idcos.Application;
import com.idcos.automate.dal.mybatis.BibleTextMapper;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import org.springframework.test.context.web.WebAppConfiguration;

@RunWith(SpringRunner.class)
@SpringBootTest(classes = Application.class)
@WebAppConfiguration
public class MybatisTest {

    @Autowired
    private BibleTextMapper bibleTextMapper;

    @Test
    public void testFindOne() {
        System.out.println(bibleTextMapper.findOne(&quot;1&quot;));
    }
}
</code></pre>

<ul>
<li>注意若MyBatis版本太低，不存在@Mapper注解，当前工程MyBatis版本号为3.4.4</li>
</ul>

<h4 id="参考">参考</h4>

<p>[[** <a href="https://github.com/mybatis/spring-boot-starter">https://github.com/mybatis/spring-boot-starter</a>][MyBatis
Spring-Boot-Starter]]</p>

<h3 id="xml整合">xml整合</h3>

<ul>
<li>引入依赖</li>
</ul>

<pre><code class="language-shell">
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;1.5.7.RELEASE&lt;/version&gt;
        &lt;relativePath /&gt; 
    &lt;/parent&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;!-- 1.3.0 --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;${mybatis.spring.boot.starter}&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;!-- DB --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
            &lt;version&gt;${mysql.connector.version}&lt;/version&gt;
        &lt;/dependency&gt;
&lt;dependencies&gt;
</code></pre>

<ul>
<li>配置数据源及mapper路径</li>
</ul>

<pre><code class="language-shell">#server.port=8080
spring.profiles.active=local
spring.jpa.database=MYSQL
spring.jpa.show-sql=true
spring.jpa.hibernate.naming-strategy=org.hibernate.cfg.DefaultNamingStrategy
spring.datasource.username=root
spring.datasource.url=jdbc:mysql://mysql.dev.idcos.net:3306/gf-csa?characterEncoding=UTF-8&amp;useSSL=false
spring.datasource.password=P@ssw0rd
spring.datasource.driver-class-name=com.mysql.jdbc.Driver
spring.datasource.test-on-borrow=true
spring.datasource.validation-interval=30
spring.datasource.validation-query=SELECT 1

# mybatis
mybatis.mapper-locations=classpath:mapper/*.xml
## 表结构别名，配置PO对象所在的包路径
mybatis.type-aliases-package=com.idcos.automate.dal.auto.dataobject

</code></pre>

<ul>
<li>配置mapper接口类</li>
</ul>

<pre><code class="language-java">package com.idcos.automate.dal.mybatis;

import com.idcos.automate.dal.auto.dataobject.xl.BibleBookDO;

import java.util.List;

public interface BibleBookMapper {

    List&lt;BibleBookDO&gt; findAll();
}
</code></pre>

<ul>
<li>配置mapper接口所对应的xml文件</li>
</ul>

<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot; &gt;
&lt;!--namespace对应mapper接口实体--&gt;
&lt;mapper namespace=&quot;com.idcos.automate.dal.mybatis.BibleBookMapper&quot;&gt;
    &lt;!--使用resultType来指定返回值信息，由于配置了alias，所以此处可以直接使用类名称--&gt;
    &lt;select id=&quot;findAll&quot; resultType=&quot;BibleBookDO&quot;&gt;
                SELECT * FROM BIBLE_BOOK
        &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>

<ul>
<li>扫描启动</li>
</ul>

<pre><code class="language-java">package com.idcos;

import org.mybatis.spring.annotation.MapperScan;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.EnableAutoConfiguration;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.ImportResource;
import org.springframework.scheduling.annotation.EnableScheduling;

@SpringBootApplication
@EnableAutoConfiguration
@EnableScheduling
@ImportResource({ &quot;classpath*:spring/*.xml&quot; })
//mapper所在的包
@MapperScan(&quot;com.idcos.automate.dal.mybatis&quot;)
public class Application {

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
</code></pre>

</div>


    </div>

    
  </body>
</html>